<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Remover Silêncio do Áudio</title>
<style>
body { font-family: Arial; display: flex; flex-direction: column; align-items: center; padding: 20px; background: #f4f4f9; }
h1 { color: #333; }
input, button { padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; }
button { cursor: pointer; background-color: #007bff; color: #fff; border: none; }
button:hover { background-color: #0056b3; }
.audio-container { margin-top: 20px; text-align: center; }
.audio-container audio { width: 100%; max-width: 500px; margin-top: 10px; }
canvas { border:1px solid #ccc; margin-top:10px; width:100%; max-width:500px; }
a { display: inline-block; margin-top: 10px; color: #007bff; text-decoration: none; }
a:hover { text-decoration: underline; }
</style>
</head>
<body>

<h1>Remover Silêncio do Áudio</h1>
<input type="file" id="audioFile" accept="audio/*">
<button onclick="processAudio()">Remover Silêncio</button>

<div class="audio-container" id="audioContainer">
  <canvas id="waveform"></canvas>
</div>

<script src="waveform.js"></script>
<script>
async function processAudio() {
  const fileInput = document.getElementById("audioFile");
  if (!fileInput.files.length) return alert("Selecione um arquivo de áudio");

  const formData = new FormData();
  formData.append("audio", fileInput.files[0]);

  const container = document.getElementById("audioContainer");
  container.innerHTML = "Processando...";

  try {
    const response = await fetch("/process-audio", { method: "POST", body: formData });
    if (!response.ok) throw new Error("Erro ao processar áudio");

    const data = await response.json();

    container.innerHTML = `
      <p>Áudio processado! Duração final: ${data.duration} segundos</p>
      <audio controls src="${data.processedAudioUrl}"></audio>
      <canvas id="waveform"></canvas>
      <a href="${data.processedAudioUrl}" download="audio_processado">Baixar Áudio</a>
    `;

    drawWaveform(data.processedAudioUrl);
  } catch (err) {
    container.innerHTML = "Erro ao processar áudio.";
    console.error(err);
  }
}
</script>

</body>
</html>
